<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Formul√°rio de Levantamento de Necessidades de Capacita√ß√µes - Firjan SENAI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --azul-firjan: #0073e6;
      --cinza-bg: #f5f5f5;
      --cinza-claro: #ddd;
      --cinza-label: #333;
    }

    .firjan-cabecalho {
   background-image: url(img/background.png);
   background-size: cover;
   background-repeat: no-repeat;
   background-position: center;
   display: flex;
   align-items: center;
   justify-content: flex-start;
   padding: 20px 30px;
   width: 100%;
   max-width: 940px;
   margin: 0 auto 30px auto;
   border-radius: 8px;
   box-sizing: border-box;
  }

 .firjan-logo {
  max-width: 120px;
  margin-right: 20px;
 }

 .firjan-texto {
  color: white;
  font-family: Arial, sans-serif;
  font-size: 16px;
 }

 .firjan-texto p {
  margin: 4px 0;
 }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--cinza-bg);
      margin: 0;
      padding: 2rem;
    }

    .form-container {
      max-width: 860px;
      margin: auto;
      background: #fff;
      padding: 2rem 2.5rem;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0,0,0,0.05);
    }

    h2 {
      color: var(--azul-firjan);
      border-bottom: 2px solid var(--azul-firjan);
      padding-bottom: 6px;
      margin-top: 2.5rem;
    }

    label {
      display: block;
      margin: 18px 0 6px;
      font-weight: bold;
      color: var(--cinza-label);
    }

    input, textarea, select {
      width: 100%;
      padding: 10px;
      font-size: 15px;
      border-radius: 6px;
      border: 1px solid var(--cinza-claro);
    }

    textarea {
      min-height: 80px;
      resize: vertical;
    }

    button {
      background-color: var(--azul-firjan);
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 30px;
    }

    button:hover {
      background-color: #005bb5;
    }

    .form-page {
      display: none;
    }

    .form-page.active {
      display: block;
    }

    .button-row {
      display: flex;
      justify-content: space-between;
      gap: 10px;
    }

   .form-group {
    margin-bottom: 16px;
  }

  .form-label {
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 8px;
    display: block;
  }

  .erro-campo {
  color: red;
  font-size: 13px;
  margin-top: 4px;
}

  .checkbox-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 12px 24px;
  }

  .checkbox-grid label {
    display: flex;
    align-items: center;
    font-size: 14px;
    gap: 8px;
  }

  .checkbox-grid input[type="checkbox"] {
    margin: 0;
  }

  .checkbox-wrapper {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 12px 20px;
  margin-top: 10px;
}

.checkbox-wrapper label {
  font-size: 14px;
  display: grid;
  grid-template-columns: auto 1fr;
  align-items: start;
  gap: 8px;
  line-height: 1.3;
}
  </style>
  
</head>
<body>
  <div class="firjan-cabecalho">
    <img src="img/logo.png" alt="Logo Firjan" class="firjan-logo">
    <div class="firjan-texto">
      <p><strong>LEVANTAMENTO DE NECESSIDADES | CONTEXTO</strong></p>
      <p>N√∫cleo de Desenvolvimento EaD - Centro de Refer√™ncia Firjan SENAI Maracan√£ teste</p>
    </div>
  </div>

  <div class="form-container">
    <form id="formularioFirjan">

      <!-- Formul√°rio 1 -->
      <div class="form-page active" id="pagina1">
                <h2>Respons√°vel pela Demanda</h2>

        <label>Nome Completo</label>
        <input type="text" name="responsavel_demanda" required>

        <label>Institui√ß√£o</label>
        <input type="text" name="instituicao_demanda" required>

        <label>√Årea</label>
        <input type="text" name="area_demanda" required>

        <label>Cargo</label>
        <input type="text" name="cargo_demanda" required>

        <label>E-mail</label>
        <input type="email" name="email_demanda" required>

        <label>Telefone</label>
        <input type="text" name="telefone_demanda" title="Apenas n√∫meros" required>

        <label>Fun√ß√µes no projeto (exemplo: validar, acompanhar etc.)</label>
        <input type="text" name="funcao_demanda" required>

        <h2>Ponto Focal</h2>

        <label>Nome Completo</label>
        <input type="text" name="nome_ponto_focal">

        <label>Institui√ß√£o</label>
        <input type="text" name="instituicao_ponto_focal" required>

        <label>√Årea</label>
        <input type="text" name="area_ponto_focal" required>

        <label>Cargo</label>
        <input type="text" name="cargo_ponto_focal" required>

        <label>E-mail</label>
        <input type="email" name="email_ponto_focal" required>

        <label>Telefone</label>
        <input type="text" name="telefone_ponto_focal" title="Apenas n√∫meros" required>

        <label>Fun√ß√µes no projeto (exemplo: validar, acompanhar etc.)</label>
        <input type="text" name="cargo_ponto_focal" required>

        <div class="form-section mt-6 space-y-4">
          <h2 class="text-lg font-semibold">Informa√ß√µes Adicionais da Demanda</h2>
        
          <div>
            <label for="area_requisitante" class="block text-sm font-medium">Indicar √°rea requisitante.</label>
            <input type="text" id="area_requisitante" name="area_requisitante" required class="input" />
          </div>
        
          <div>
            <label for="resumo_demanda" class="block text-sm font-medium">Resumir demanda.</label>
            <textarea id="resumo_demanda" name="resumo_demanda" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label for="gerador_demanda" class="block text-sm font-medium">Informar o que gerou a demanda.</label>
            <textarea id="gerador_demanda" name="gerador_demanda" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label class="block text-sm font-medium">A demanda est√° relacionada a algum objetivo estrat√©gico da institui√ß√£o? Se sim, especificar.</label>
            <textarea name="objetivo_estrategico" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label for="contexto_atual" class="block text-sm font-medium">Descrever contexto atual da demanda.</label>
            <textarea id="contexto_atual" name="contexto_atual" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label for="contexto_desejado" class="block text-sm font-medium">Descrever contexto desejado ap√≥s realiza√ß√£o do projeto.</label>
            <textarea id="contexto_desejado" name="contexto_desejado" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label class="block text-sm font-medium">A demanda est√° relacionada a outro projeto? Se sim, especificar.</label>
            <textarea name="relacao_outro_projeto" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label class="block text-sm font-medium">A demanda √© pr√©-requisito para outro projeto? Se sim, especificar.</label>
            <textarea name="pre_requisito_projeto" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label for="abrangencia_projeto" class="block text-sm font-medium">Indicar abrang√™ncia do projeto (toda a institui√ß√£o, determinadas √°reas etc.).</label>
            <textarea id="abrangencia_projeto" name="abrangencia_projeto" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label for="modalidade_ensino" class="block text-sm font-medium">Indicar modalidade de ensino.</label>
          </div>
        
          <div class="checkbox-wrapper">
            <label><input type="checkbox" name="tipo_solucao[]" value="Curso (navega√ß√£o horizontal)"> Curso (navega√ß√£o horizontal)</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Curso (navega√ß√£o vertical)"> Curso (navega√ß√£o vertical)</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Banco de Quest√µes"> Banco de Quest√µes</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Atividades de fixa√ß√£o"> Atividades de fixa√ß√£o</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Avalia√ß√£o de aprendizagem"> Avalia√ß√£o de aprendizagem</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Trilha de aprendizagem"> Trilha de aprendizagem</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Plano de estudo"> Plano de estudo</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Apresenta√ß√£o"> Apresenta√ß√£o</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Almanaque/Quadrinho"> Almanaque/Quadrinho</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Mapa de conhecimento"> Mapa de conhecimento</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Guia/Manual"> Guia/Manual</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Tutorial"> Tutorial</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Apostila"> Apostila</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Livro Digital"> Livro Digital</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Videoaula"> Videoaula</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="V√≠deo Instrucional"> V√≠deo Instrucional</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Anima√ß√£o 2D"> Anima√ß√£o 2D</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Anima√ß√£o 3D"> Anima√ß√£o 3D</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Infogr√°fico"> Infogr√°fico</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Jogo"> Jogo</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Quiz"> Quiz</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Podcast"> Podcast</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Simula√ß√£o de Sistemas"> Simula√ß√£o de Sistemas</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Todos"> Todos</label>
          </div>
          
          
        
          <div>
            <label for="lms_necessario" class="block text-sm font-medium">Todas as solu√ß√µes indicadas dever√£o ser hospedadas em LMS? Qual?</label>
            <input type="text" id="lms_necessario" name="lms_necessario" required class="input" />
          </div>
        
          <div>
            <label for="estrategia_educacional" class="block text-sm font-medium">Indicar estrat√©gia educacional.</label>
            <textarea id="estrategia_educacional" name="estrategia_educacional" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label for="acao_previa" class="block text-sm font-medium">J√° foi realizada alguma a√ß√£o relativa √† demanda? Se sim, especificar tipo, modalidade de ensino e carga hor√°ria.</label>
            <textarea id="acao_previa" name="acao_previa" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label for="prazo_desenvolvimento" class="block text-sm font-medium">H√° expectativa em rela√ß√£o ao prazo para desenvolvimento? Se sim, especificar.</label>
            <textarea id="prazo_desenvolvimento" name="prazo_desenvolvimento" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label for="carga_horaria_prevista" class="block text-sm font-medium">H√° carga hor√°ria prevista? Se sim, especificar.</label>
            <textarea id="carga_horaria_prevista" name="carga_horaria_prevista" rows="2" required class="textarea"></textarea>
          </div>
        </div>

        <div class="button-row">
          <span></span>
          <button type="button" id="btnProximo">Pr√≥ximo</button>
        </div>
      </div>

      <!-- Formul√°rio 2 -->
      <div class="form-page" id="pagina2">
        <h2>Informa√ß√µes Gerais</h2>

        <label>Manual da marca</label>
        <input type="text" name="manual_marca">

        <label>Identidade visual</label>
        <input type="text" name="identidade_visual">

        <label>Identidade verbal</label>
        <input type="text" name="identidade_verbal">

        <label>Identidade sonora</label>
        <input type="text" name="identidade_sonora">

        <label>Identidade visual extra</label>
        <textarea name="identidade_visual_extra"></textarea>

        <label>Restri√ß√µes visuais (cor, imagem, logomarca)</label>
        <textarea name="restricoes_visuais"></textarea>

        <label>Informa√ß√µes sobre personagens (g√™nero, idade, etnia, etc.)</label>
        <textarea name="info_personagens"></textarea>

        <label>Quantidade de personagens</label>
        <input type="text" name="qtd_personagens">

        <label>Estilo dos personagens</label>
        <input type="text" name="estilo_personagens">

        <label>Vestimenta</label>
        <input type="text" name="vestimenta">

        <label>Cen√°rio previsto</label>
        <textarea name="cenario_previsto"></textarea>

        <label>Cliente possui banco de imagens?</label>
        <input type="text" name="banco_imagens">

        <label>Necess√°rio contratar banco de imagens?</label>
        <input type="text" name="contratar_banco_imagens">

        <label>Legenda para acessibilidade auditiva</label>
        <textarea name="legenda_acessibilidade"></textarea>

        <label>√Åudio para acessibilidade visual</label>
        <textarea name="audio_acessibilidade"></textarea>

        <label>Solu√ß√£o precisa ser responsiva?</label>
        <input type="text" name="design_responsivo">

        <label>Precisa de visualiza√ß√£o offline?</label>
        <input type="text" name="visualizacao_offline">

        <div class="button-row">
          <button type="button" onclick="mostrarPagina(1)">Voltar</button>
          <button type="button" id="btnEnviar">Enviar</button>
        </div>
      </div>

    </form>
  </div>

  <script>
    document.getElementById("btnEnviar").addEventListener("click", async function () {
      const form = document.getElementById("formularioFirjan");
  
      // üîÅ Remove mensagens de erro anteriores
      form.querySelectorAll(".erro-campo").forEach(el => el.remove());
  
      // üßº Desativa temporariamente "required" para evitar erro de campos ocultos
      const campos = form.querySelectorAll("input[required], textarea[required], select[required]");
      campos.forEach(campo => {
        campo.dataset.tempRequired = "true";
        campo.required = false;
      });
  
      let formValido = true;
      let primeiroCampoInvalido = null;
  
      // üïµÔ∏è‚Äç‚ôÇÔ∏è Valida√ß√£o personalizada
      for (const campo of campos) {
        if (!campo.value.trim()) {
          const pagina = campo.closest(".form-page");
  
          // Mostra a p√°gina do campo se for a primeira inv√°lida
          if (!primeiroCampoInvalido) {
            primeiroCampoInvalido = campo;
            document.querySelectorAll('.form-page').forEach(p => p.classList.remove('active'));
            pagina.classList.add('active');
          }
  
          // Adiciona mensagem de erro visual abaixo do campo
          if (!campo.nextElementSibling || !campo.nextElementSibling.classList.contains("erro-campo")) {
            const erro = document.createElement("div");
            erro.className = "erro-campo";
            erro.style.color = "red";
            erro.style.fontSize = "13px";
            erro.style.marginTop = "4px";
            erro.textContent = "Este campo √© obrigat√≥rio.";
            campo.insertAdjacentElement("afterend", erro);
          }
  
          formValido = false;
        }
      }
  
      // Restaura o atributo "required"
      campos.forEach(campo => {
        if (campo.dataset.tempRequired) {
          campo.required = true;
          delete campo.dataset.tempRequired;
        }
      });
  
      // ‚ùå Se houver erro, foca no primeiro campo
      if (!formValido) {
        if (primeiroCampoInvalido) {
          primeiroCampoInvalido.scrollIntoView({ behavior: 'smooth', block: 'center' });
          primeiroCampoInvalido.focus();
        }
        return;
      }
  
      // ‚úÖ Tudo certo? Envia!
      const formData = new FormData(form);
      const data = {};
      formData.forEach((value, key) => data[key] = value);
  
      try {
        const response = await fetch("https://firjan-form-api.onrender.com/api/enviar", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });
  
        if (response.ok) {
          alert("Formul√°rio enviado com sucesso!");
          form.reset();
          mostrarPagina(1);
          window.scrollTo({ top: 0, behavior: "smooth" });
        } else {
          alert("Erro ao enviar formul√°rio.");
        }
      } catch (error) {
        alert("Erro de conex√£o com o servidor.");
      }
    });
  </script>
  

</body>
</html>