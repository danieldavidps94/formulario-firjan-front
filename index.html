<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <meta charset="UTF-8">
  <title>Formulário de Levantamento de Necessidades de Capacitações - Firjan SENAI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --azul-firjan: #0073e6;
      --cinza-bg: #f5f5f5;
      --cinza-claro: #ddd;
      --cinza-label: #333;
    }

    @media print {
  body {
    background: white !important;
    padding: 10px !important;
  }
  .form-container {
    box-shadow: none !important;
    width: 100% !important;
    max-width: 100% !important;
  }
  .form-page {
    display: block !important;
    page-break-before: always;
    page-break-inside: avoid;
  }
  .firjan-cabecalho {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
    background: #0073e6 !important;
  }
}

    @font-face {
  font-family: 'Averta';
  src: url('fonts/averta-light.woff2') format('woff2');
  font-weight: 300;
  font-style: normal;
}

@font-face {
  font-family: 'Averta';
  src: url('fonts/averta-lightitalic.woff2') format('woff2');
  font-weight: 300;
  font-style: italic;
}

@font-face {
  font-family: 'Averta';
  src: url('fonts/averta-regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
}

@font-face {
  font-family: 'Averta';
  src: url('fonts/averta-regularitalic.woff2') format('woff2');
  font-weight: 400;
  font-style: italic;
}

@font-face {
  font-family: 'Averta';
  src: url('fonts/averta-semibold.woff2') format('woff2');
  font-weight: 600;
  font-style: normal;
}

@font-face {
  font-family: 'Averta';
  src: url('fonts/averta-semibolditalic.woff2') format('woff2');
  font-weight: 600;
  font-style: italic;
}

   .firjan-cabecalho {
   background-image: url(img/background.png);
   background-size: cover;
   background-repeat: no-repeat;
   background-position: center;
   display: flex;
   align-items: center;
   justify-content: flex-start;
   padding: 20px 30px;
   width: 100%;
   max-width: 940px;
   margin: 0 auto 30px auto;
   border-radius: 8px;
   box-sizing: border-box;
  }

 .firjan-logo {
  max-width: 120px;
  margin-right: 20px;
 }

 .firjan-texto {
  color: white;
  font-family: 'Averta', sans-serif;
  font-size: 17px;
 }

 .firjan-texto p {
  margin: 4px 0;
 }

    body {
      font-family: 'Averta', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--cinza-bg);
      margin: 0;
      padding: 2rem;
    }

    .form-container {
      max-width: 860px;
      margin: auto;
      background: #fff;
      padding: 2rem 2.5rem;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0,0,0,0.05);
    }

    h2 {
      color: var(--azul-firjan);
      border-bottom: 2px solid var(--azul-firjan);
      padding-bottom: 6px;
      margin-top: 2.5rem;
    }

    label {
      display: block;
      margin: 18px 0 6px;
      font-weight: bold;
      color: var(--cinza-label);
    }

    input, textarea, select {
      width: 100%;
      padding: 10px;
      font-size: 15px;
      border-radius: 6px;
      border: 1px solid var(--cinza-claro);
    }

    textarea {
      min-height: 80px;
      resize: vertical;
    }

    button {
      background-color: var(--azul-firjan);
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 30px;
    }

    button:hover {
      background-color: #005bb5;
    }

    .form-page {
      display: none;
    }

    .form-page.active {
      display: block;
    }

    .button-row {
      display: flex;
      justify-content: space-between;
      gap: 10px;
    }

   .form-group {
    margin-bottom: 16px;
  }

  .form-label {
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 8px;
    display: block;
  }

  .mensagem-erro {
  color: red;
  font-size: 13px;
  margin-top: 4px;
  }

  .checkbox-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 12px 24px;
  }

  .checkbox-grid label {
    display: flex;
    align-items: center;
    font-size: 14px;
    gap: 8px;
  }

  .checkbox-grid input[type="checkbox"] {
    margin: 0;
  }

  .checkbox-wrapper {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 12px 20px;
  margin-top: 10px;
  }

.checkbox-wrapper label {
  font-size: 14px;
  display: grid;
  grid-template-columns: auto 1fr;
  align-items: start;
  gap: 8px;
  line-height: 1.3;
  }
  </style>
  
  
</head>
<body>
  <div class="firjan-cabecalho">
    <img src="img/logo.png" alt="Logo Firjan" class="firjan-logo">
    <div class="firjan-texto">
      <p><strong>LEVANTAMENTO DE NECESSIDADES | CONTEXTO</strong></p>
      <p>Núcleo de Desenvolvimento EaD - Centro de Referência Firjan SENAI Maracanã</p>
    </div>
  </div>

  <div class="form-container">
    <form id="formularioFirjan">

       <!-- Formulário 1 -->
    

         <div class="form-page active" id="pagina1">
                <h2>Responsável pela Demanda</h2>

         <label>Nome Completo:</label>
         <input type="text" name="responsavel_demanda" required>

         <label>Instituição:</label>
         <input type="text" name="instituicao_demanda" required>

         <label>Área:</label>
         <input type="text" name="area_demanda" required>

         <label>Cargo:</label>
         <input type="text" name="cargo_demanda" required>

         <label>E-mail:</label>
         <input type="email" name="email_demanda" required>

         <label>Telefone:</label>
         <input type="text" name="telefone_demanda" title="Apenas números" required>

         <label>Funções no projeto (exemplo: validar, acompanhar etc.):</label>
         <input type="text" name="funcao_demanda" required>

         <h2>Ponto Focal</h2>

         <label>Nome Completo:</label>
         <input type="text" name="nome_ponto_focal" required>

         <label>Instituição:</label>
         <input type="text" name="instituicao_ponto_focal" required>

         <label>Área:</label>
         <input type="text" name="area_ponto_focal" required>

         <label>Cargo:</label>
         <input type="text" name="cargo_ponto_focal" required>

         <label>E-mail:</label>
         <input type="email" name="email_ponto_focal" required>

         <label>Telefone:</label>
         <input type="text" name="telefone_ponto_focal" title="Apenas números" required>

         <label>Funções no projeto (exemplo: validar, acompanhar etc.):</label>
         <input type="text" name="cargo_ponto_focal" required>

         <div class="form-section mt-6 space-y-4">
          <h2 class="text-lg font-semibold">Cenário</h2>
        
          <div>
            <label for="area_requisitante" class="block text-sm font-medium">Indique área requisitante:</label>
            <input type="text" id="area_requisitante" name="area_requisitante" required class="input" />
          </div>
        
          <div>
            <label for="resumo_demanda" class="block text-sm font-medium">Resumo da demanda:</label>
            <textarea id="resumo_demanda" name="resumo_demanda" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label for="gerador_demanda" class="block text-sm font-medium">Informe o que gerou a demanda:</label>
            <textarea id="gerador_demanda" name="gerador_demanda" rows="2" required class="textarea"></textarea>
          </div>
        
          <label for="campo1">A demanda está relacionada a algum objetivo estratégico da instituição? Se sim, especificar.</label>
          <select name="campo1" id="campo1" class="condicional-sim-nao" data-target="campo1-extra" required>
            <option value="">Selecione</option>
            <option value="sim">Sim</option>
            <option value="nao">Não</option>
          </select>
          
          <div id="campo1-extra" class="campo-extra" style="display: none; margin-top: 10px;">
            <label>Especifique:</label>
            <textarea name="campo1_motivo" rows="3"></textarea>
          </div>
        
          <div>
            <label for="contexto_atual" class="block text-sm font-medium">Descreva o contexto atual da demanda:</label>
            <textarea id="contexto_atual" name="contexto_atual" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label for="contexto_desejado" class="block text-sm font-medium">Descreva o contexto desejado após realização do projeto:</label>
            <textarea id="contexto_desejado" name="contexto_desejado" rows="2" required class="textarea"></textarea>
          </div>
        
          <label for="campo2">A demanda está relacionada a outro projeto? Se sim, especificar.</label>
          <select name="campo2" id="campo2" class="condicional-sim-nao" data-target="campo2-extra" required>
            <option value="">Selecione</option>
            <option value="sim">Sim</option>
            <option value="nao">Não</option>
          </select>
          
          <div id="campo2-extra" class="campo-extra" style="display: none; margin-top: 10px;">
            <label>Especifique:</label>
            <textarea name="campo2_motivo" rows="3"></textarea>
          </div>
        
          <label for="campo3">A demanda é pré-requisito para outro projeto? Se sim, especificar.</label>
          <select name="campo3" id="campo3" class="condicional-sim-nao" data-target="campo3-extra" required>
            <option value="">Selecione</option>
            <option value="sim">Sim</option>
            <option value="nao">Não</option>
          </select>
          
          <div id="campo3-extra" class="campo-extra" style="display: none; margin-top: 10px;">
            <label>Especifique:</label>
            <textarea name="campo3_motivo" rows="3"></textarea>
          </div>
        
          <div>
            <label for="abrangencia_projeto" class="block text-sm font-medium">Indique abrangência do projeto (toda a instituição, determinadas áreas etc.):</label>
            <textarea id="abrangencia_projeto" name="abrangencia_projeto" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="campo4">Indique a modalidade de ensino:</label>
          <select name="campo4" id="campo4" class="condicional-sim-nao" data-target="campo4-extra" required>
            <option value="">Selecione</option>
            <option value="online">Online</option>
            <option value="presencial">Presencial</option>
            <option value="hibrido">Híbrido</option>
          </select>
          </div>
        
          <div>
            <label for="tipo_solucao_texto" class="block text-sm font-medium">Indicar tipo de solução a ser contratada:</label>
          </div>
        
          <div class="checkbox-wrapper" id="grupoCheckbox">
            <label><input type="checkbox" name="tipo_solucao[]" value="Curso (navegação horizontal)"> Curso (navegação horizontal)</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Curso (navegação vertical)"> Curso (navegação vertical)</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Banco de Questões"> Banco de Questões</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Atividades de fixação"> Atividades de fixação</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Avaliação de aprendizagem"> Avaliação de aprendizagem</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Trilha de aprendizagem"> Trilha de aprendizagem</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Plano de estudo"> Plano de estudo</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Apresentação"> Apresentação</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Almanaque/Quadrinho"> Almanaque/Quadrinho</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Mapa de conhecimento"> Mapa de conhecimento</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Guia/Manual"> Guia/Manual</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Tutorial"> Tutorial</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Apostila"> Apostila</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Livro Digital"> Livro Digital</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Videoaula"> Videoaula</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Vídeo Instrucional"> Vídeo Instrucional</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Animação 2D"> Animação 2D</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Animação 3D"> Animação 3D</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Infográfico"> Infográfico</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Jogo"> Jogo</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Quiz"> Quiz</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Podcast"> Podcast</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Simulação de Sistemas"> Simulação de Sistemas</label>
            <label><input type="checkbox" name="tipo_solucao[]" value="Todos"> Todos</label>
          </div>
        
          <p></p>

          <div>
           <label for="campo5">Todas as soluções indicadas deverão ser hospedadas em LMS?</label>
           <select name="campo5" id="campo5" class="condicional-sim-nao" data-target="campo5-extra" required>
            <option value="">Selecione</option>
            <option value="sim">Sim</option>
            <option value="nao">Não</option>
           </select>
          </div>

          <div id="campo5-extra" class="campo-extra" style="display: none; margin-top: 10px;">
            <label>Qual?</label>
            <textarea name="campo5_motivo" rows="3"></textarea>
          </div>
        
          <div>
            <label for="estrategia_educacional" class="block text-sm font-medium">Indique a estratégia educacional:</label>
            <textarea id="estrategia_educacional" name="estrategia_educacional" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label for="acao_previa" class="block text-sm font-medium">Já foi realizada alguma ação relativa à demanda? Se sim, especificar tipo, modalidade de ensino e carga horária.</label>
            <textarea id="acao_previa" name="acao_previa" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label for="prazo_desenvolvimento" class="block text-sm font-medium">Há expectativa em relação ao prazo para desenvolvimento? Se sim, especificar.</label>
            <textarea id="prazo_desenvolvimento" name="prazo_desenvolvimento" rows="2" required class="textarea"></textarea>
          </div>
        
          <div>
            <label for="carga_horaria_prevista" class="block text-sm font-medium">Há carga horária prevista? Se sim, especificar.</label>
            <textarea id="carga_horaria_prevista" name="carga_horaria_prevista" rows="2" required class="textarea"></textarea>
          </div>

          <h2>Público-Alvo</h2>

          <div>
            <label for="quantidade_participantes" class="block text-sm font-medium">Estime a quantidade de participantes:</label>
            <textarea id="quantidade_participantes" name="quantidade_participantes" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="faixa_etaria" class="block text-sm font-medium">Indique a faixa etária:</label>
            <textarea id="faixa_etaria" name="faixa_etaria" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="nivel_instrucao" class="block text-sm font-medium">Indique o nível de instrução:</label>
            <textarea id="nivel_instrucao" name="nivel_instrucao" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="area_atuacao" class="block text-sm font-medium">Indique a área de atuação:</label>
            <textarea id="area_atuacao" name="area_atuacao" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="funcao_exercida" class="block text-sm font-medium">Indique a(s) função(ões) exercida(s):</label>
            <textarea id="funcao_exercida" name="funcao_exercida" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="relacao_publico" class="block text-sm font-medium">Informe a relação do público com a temática:</label>
            <textarea id="relacao_publico" name="relacao_publico" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="nivel_conhecimento" class="block text-sm font-medium">Informe o nível de conhecimento do público sobre a temática:</label>
            <textarea id="nivel_conhecimento" name="nivel_conhecimento" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="pre_requisito_participacao" class="block text-sm font-medium">Existem pré-requisitos para participação? Se sim, especifique:</label>
            <textarea id="pre_requisito_participacao" name="pre_requisito_participacao" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="resultados_esperados" class="block text-sm font-medium">Informe os resultados esperados para o público após finalização do projeto:</label>
            <textarea id="resultados_esperados" name="resultados_esperados" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="conhecimento_teorico_pratico" class="block text-sm font-medium">Qual relação entre conhecimento teórico e prático no dia a dia do público?</label>
            <textarea id="conhecimento_teorico_pratico" name="conhecimento_teorico_pratico" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="objetivos_aprendizagem" class="block text-sm font-medium">Indique os objetivos de aprendizagem a serem atingidos pelo público (elencar):</label>
            <textarea id="objetivos_aprendizagem" name="objetivos_aprendizagem" rows="2" required class="textarea"></textarea>
          </div>
          
          <h2>Conteúdo</h2>

          <div>
            <label for="assuntos_abordados" class="block text-sm font-medium">Indique os assuntos a serem abordados:</label>
            <textarea id="assuntos_abordados" name="assuntos_abordados" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="conteudos_existentes" class="block text-sm font-medium">Indique os conteúdos existentes (nome e formato: pdf, ppt, doc, mp4 etc.):</label>
            <textarea id="conteudos_existentes" name="conteudos_existentes" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="quantidade_paginas" class="block text-sm font-medium">Indique a quantidade de páginas/laudas previstas (considerar o somatório de todos os conteúdos):</label>
            <textarea id="quantidade_paginas" name="quantidade_paginas" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="natureza_conteudos" class="block text-sm font-medium">Indique a natureza do(s) conteúdo(s):</label>
            <textarea id="natureza_conteudos" name="natureza_conteudos" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="especialista_designado" class="block text-sm font-medium">Há especialista(s) designado(s) para desenvolver conteúdos do projeto? Se sim, especifique:</label>
            <textarea id="especialista_designado" name="especialista_designado" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="frequencia_atualizacao" class="block text-sm font-medium">Há previsão de frequência de atualização do material a ser desenvolvido? Se sim, especifique:</label>
            <textarea id="frequencia_atualizacao" name="frequencia_atualizacao" rows="2" required class="textarea"></textarea>
          </div>

          <div>
            <label for="infos_adicionais" class="block text-sm font-medium">Informações Adicionais:</label>
            <textarea id="infos_adicionais" name="infos_adicionais" rows="4" class="textarea"></textarea>
          </div>

        </div>

        <div class="button-row">
          <span></span>
          <button type="button" id="btnProximo">Próximo</button>
        </div>
      </div>

      <!-- Formulário 2 -->
      <div class="form-page" id="pagina2">
        <h2>Informações Gerais</h2>

        <label>Existe manual da arca para compartilhar?</label>
        <input type="text" name="manual_marca" required>

        <label>Existe identidade visual para compartilhar?</label>
        <input type="text" name="identidade_visual" required>

        <label>Existe identidade verbal para compartilhar?</label>
        <input type="text" name="identidade_verbal" required>

        <label>Existe alguma identidade visual extra a ser seguida? Se sim, especifique:</label>
        <input type="text" name="identidade_sonora" required>

        <label>Existem restrições quanto a cor, imagem, logomarca etc.? Se sim, especifique:</label>
        <textarea name="identidade_visual_extra" required></textarea>

        <label>É necessário contemplar personagem(ens)?  Informe características (Gênero, Idade, Etnia, Tipo e cor do cabelo e cor dos olhos):</label>
        <textarea name="info_personagem1" required></textarea>

        <label>Quantidade de personagens:</label>
        <input type="text" name="qtd_personagens" required>

        <label>Estilo dos personagens:</label>
        <input type="text" name="estilo_personagens" required>

        <label>Detalhe a vestimenta caaso sejam previstos personagens:</label>
        <input type="text" name="vestimenta">

        <label>Detalhe o cenário caso sejam previstos personagens:</label>
        <textarea name="cenario_previsto" required></textarea>

        <label>Cliente possui banco de imagens?</label>
        <input type="text" name="banco_imagens" required>

        <label>É necessário contratar banco de imagens?</label>
        <input type="text" name="contratar_banco_imagens" required>

        <label>É necessário contemplar legenda em determinadas soluções para atender pessoas com deficiência auditiva? Se sim, especifique:</label>
        <textarea name="legenda_acessibilidade" required></textarea>

        <label>É necessário contemplar áudio nas soluções para atender pessoas com deficiência visual? Se sim, especifique:</label>
        <textarea name="audio_acessibilidade" required></textarea>

        <label>As soluções precisam ter design responsivo (layout que se adapta a qualquer tamanho de tela)?</label>
        <input type="text" name="design_responsivo" required>

        <label>É necessária a visualização das soluções no formato offline?</label>
        <input type="text" name="visualizacao_offline" required>

        <div>
          <label for="infos_adicionais2" class="block text-sm font-medium">Informações Adicionais:</label>
          <textarea id="infos_adicionais2" name="infos_adicionais2" rows="4" class="textarea"></textarea>
        </div>

        <div class="button-row">
          <button type="button" onclick="mostrarPagina(1)">Voltar</button>
          <button type="button" id="btnEnviar">Enviar</button>
        </div>
      </div>

    </form>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const selects = document.querySelectorAll('.condicional-sim-nao');
  
      selects.forEach(select => {
        const targetId = select.dataset.target;
        const extraField = document.getElementById(targetId);
        const textarea = extraField.querySelector("textarea");
  
        select.addEventListener("change", function () {
          if (select.value === "sim") {
            extraField.style.display = "block";
            textarea.setAttribute("required", "required");
          } else {
            extraField.style.display = "none";
            textarea.removeAttribute("required");
            textarea.value = "";
          }
        });
      });
    });
  </script>  

  <script>
    function mostrarPagina(numero) {
      document.querySelectorAll('.form-page').forEach(page => page.classList.remove('active'));
      document.getElementById('pagina' + numero).classList.add('active');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  
    function aplicarMascaraTelefone(input) {
      input.addEventListener("input", function () {
        let valor = input.value.replace(/\D/g, "");
        if (valor.length > 11) valor = valor.slice(0, 11);
        if (valor.length >= 2 && valor.length <= 6) {
          valor = `(${valor.slice(0, 2)}) ${valor.slice(2)}`;
        } else if (valor.length > 6) {
          valor = `(${valor.slice(0, 2)}) ${valor.slice(2, 7)}-${valor.slice(7)}`;
        }
        input.value = valor;
      });
    }
  
    function limparErros() {
      document.querySelectorAll(".mensagem-erro").forEach(el => el.remove());
    }
  
    function exibirErro(campo, mensagem) {
      limparErroCampo(campo);
      const erro = document.createElement("div");
      erro.className = "mensagem-erro";
      erro.textContent = mensagem;
      campo.insertAdjacentElement("afterend", erro);
    }
  
    function limparErroCampo(campo) {
      const proximo = campo.nextElementSibling;
      if (proximo && proximo.classList.contains("mensagem-erro")) {
        proximo.remove();
      }
    }
  
    function validarCamposPagina(paginaId) {
  const pagina = document.getElementById(paginaId);
  const campos = pagina.querySelectorAll("input[required], textarea[required], select[required]");
  let valido = true;
  let primeiroCampoInvalido = null;

  limparErros();

  campos.forEach(campo => {
    limparErroCampo(campo);
    if (!campo.value.trim()) {
      exibirErro(campo, "⚠️ Campo obrigatório");
      if (!primeiroCampoInvalido) primeiroCampoInvalido = campo;
      valido = false;
    }
  });

  // VALIDAÇÃO DOS CHECKBOXES (somente na página que contém)
  if (paginaId === "pagina1") {
    const checkboxes = pagina.querySelectorAll('input[name="tipo_solucao[]"]');
    const algumMarcado = Array.from(checkboxes).some(cb => cb.checked);

    if (!algumMarcado) {
      const container = checkboxes[checkboxes.length - 1].closest('.checkbox-wrapper');
      const erro = document.createElement("div");
      erro.className = "mensagem-erro";
      erro.textContent = "⚠️ Marque pelo menos uma opção.";
      container.appendChild(erro);
      if (!primeiroCampoInvalido) primeiroCampoInvalido = checkboxes[0];
      valido = false;
    }
  }

  if (!valido && primeiroCampoInvalido) {
    mostrarPagina(paginaId === "pagina1" ? 1 : 2);
    primeiroCampoInvalido.focus();
  }

  return valido;
}
  
    async function enviarFormulario() {
  const form = document.getElementById("formularioFirjan");
  const formData = new FormData(form);
  const data = {};
  formData.forEach((value, key) => data[key] = value);

  try {
    const response = await fetch("https://firjan-form-api.onrender.com/api/enviar", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });

    if (response.ok) {
      alert("Formulário enviado com sucesso!");
      form.reset();
      mostrarPagina(1);
    } else {
      alert("Erro ao enviar formulário.");
    }
  } catch (error) {
    alert("Erro de conexão com o servidor.");
  }
  } 
    document.addEventListener("DOMContentLoaded", function () {
      const telefones = document.querySelectorAll('input[name="telefone_demanda"], input[name="telefone_ponto_focal"]');
      telefones.forEach(aplicarMascaraTelefone);
  
      document.getElementById("btnProximo").addEventListener("click", () => {
        limparErros();
        const valido = validarCamposPagina("pagina1");
        if (valido) mostrarPagina(2);
      });
  
      document.getElementById("btnEnviar").addEventListener("click", () => {
  limparErros();
  const valido1 = validarCamposPagina("pagina1");
  const valido2 = validarCamposPagina("pagina2");

  if (valido1 && valido2) {
    enviarFormulario();
  }
  });
    });
  </script>
  
</body>
</html>